\renewcommand{\theFancyVerbLine}{\color{mGray800}{\bfseries\footnotesize\arabic{FancyVerbLine}}}

\newtcblisting{pybox}[0]{
    listing engine=minted,
    colback=white,
    colframe=white,
    listing only,
    minted style=colorful,
    minted language=python,
    minted options={
        linenos=true,
        breaklines=true,
        fontsize=\footnotesize,
        autogobble,
        mathescape,
        escapeinside=||
    },
    left=5mm,
    boxsep=0mm,
    enhanced
}

\newenvironment{outlinedbox}[1]
{
    \begin{tcolorbox}
    [ %
        breakable, boxrule = 1pt, boxsep = 2mm, arc = 3mm,
        left = 2mm, right = 2mm, top = 2mm, bottom = 2mm,
        colback = white, colframe = mGray900
    ] %
    \begin{center}
        \large\textit{#1}
    \end{center}
} {
    \end{tcolorbox}
}

\newenvironment{graybox}[1]
{
    \begin{tcolorbox}
    [ %
        breakable, boxrule = 0mm, boxsep = 0mm, arc = 1mm,
        left = 2mm, right = 2mm, top = 2mm, bottom = 2mm,
        colback = mBlue50, colframe = mBlue50
    ] %
    \textbf{#1:}
} {
    \end{tcolorbox}
}

\newcounter{env_counter}

\ExplSyntaxOn
\newenvironment{definition}[1][]
{
    \stepcounter{env_counter}
    \begin{tcolorbox}
    [ %
        breakable, blanker, boxrule = 0mm, boxsep = 0mm, %
        left = 0mm, right = 0mm, top = 2mm, bottom = 2mm %
    ] %
    \textbf{Definition~\thechapter.\arabic{env_counter}}
    \tl_if_blank:nTF {#1}{} {~\textbf{(#1)}} \quad \itshape
} {
    \end{tcolorbox}
}

\newenvironment{proposition}[1][]
{
    \stepcounter{env_counter}
    \begin{tcolorbox}
    [ %
        breakable, blanker, boxrule = 0mm, boxsep = 0mm, %
        left = 0mm, right = 0mm, top = 2mm, bottom = 2mm %
    ] %
    \textbf{Proposition~\thechapter.\arabic{env_counter}}
    \tl_if_blank:nTF {#1}{} {~\textbf{(#1)}} \quad \itshape
} {
    \end{tcolorbox}
}

\newenvironment{proof}[1][]
{
    \begin{tcolorbox}
    [ %
        breakable, blanker, boxrule = 0mm, boxsep = 0mm, %
        left = 0mm, right = 0mm, top = 2mm, bottom = 2mm %
    ] %
    \textbf{\scchape Proof}.~%
} {
    \end{tcolorbox}
}
\ExplSyntaxOff

\endinput